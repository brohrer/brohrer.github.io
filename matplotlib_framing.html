<!DOCTYPE html>
<html>

  <script type="text/javascript">var blog_title = "Framing in Matplotlib";</script>
  <script type="text/javascript">var publication_date = "April 8, 2019";</script>
  <head>
    <link rel="icon" href="images/ml_logo.png">
    <meta HTTP-EQUIV="REFRESH" content="0; url=https://e2eml.school/matplotlib_framing.html">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <base target="_blank">
    <script type="text/javascript" src="javascripts/blog_head.js"></script>
  </head>
  <body>
    <script type="text/javascript" src="javascripts/blog_header.js"></script>
    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

        <table>

          <tr>
            <td>
              <a target="_self" href="#manual">
                <img title="manually set Axes by size and position"
                  src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_manual.png"
                  alt="Axes with position set manually by size and position"
                  style="height: 220px;">
              </a>
            </td>

            <td>
              <a target="_self" href="#manual">
<pre><code>ax = fig.add_axes(
    (left, bottom, width, height))</code></pre>
              </a>
            </td>

          </tr>

          <tr>

            <td>
              <a target="_self" href="#multiple">
                <img title="multiple Axes"
                  src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_multiple.png"
                  alt="multiple Axes on a single Figure"
                  style="height: 220px;">
              </a>
            </td>

            <td>
              <a target="_self" href="#multiple">
<pre><code>ax1 = fig.add_axes(
    (left_1, bottom_1, width_1, height_1))
ax1.plot(x, y)
ax2 = fig.add_axes(
    (left_2, bottom_2, width_2, height_2))
ax2.plot(x, y)
...</code></pre>
              </a>
            </td>

          </tr>

          <tr>
            <td>
              <a target="_self" href="#fill">
                <img title="Figure filled with Axes"
                  src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_no_border.png"
                  alt="Axes sized to fill the Figure"
                  style="height: 220px;">
              </a>
            </td>

            <td>
              <a target="_self" href="#fill">
<pre><code>ax1 = fig.add_axes((0, 0, 1, 1))</code></pre>
              </a>
            </td>

          </tr>
          <tr>

            <td>
              <a target="_self" href="#spinesoff">
                <img title="spines turned off"
                  src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_spines_off.png"
                  alt="some of the Axes spines turned off"
                  style="height: 220px;">
              </a>
            </td>

            <td>
              <a target="_self" href="#spinesoff">
<pre><code>ax.spines["top"].set_visible(False)
ax.spines["right"].set_visible(False)
ax.spines["left"].set_visible(False)</code></pre>
              </a>
            </td>

          </tr>

          <tr>
            <td>
              <a target="_self" href="#spinesmoved">
                <img title="spines moved"
                  src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_spines_moved.png"
                  alt="spines offset from their default positions"
                  style="height: 220px;">
              </a>
            </td>

            <td>
              <a target="_self" href="#spinesmoved">
<pre><code>ax.spines["top"].set_position(
    ("outward", 15))
ax.spines["bottom"].set_position(
    ("data", 0))
ax.spines["left"].set_position(
    ("axes", .3)) </code></pre>
              </a>
            </td>

          </tr>

          <tr>

            <td>
              <a target="_self" href="#spinestyle">
                <img title="modify Axes spine styles"
                  src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_spines_styled.png"
                  alt="Axes spines with several styles"
                  style="height: 220px;">
              </a>
            </td>

            <td>
              <a target="_self" href="#spinestyle">
<pre><code>ax.spines["top"].set_color("orange")
ax.spines["left"].set_bounds(-.5, .5)
ax.spines["right"].set_linestyle("--")
ax.spines["bottom"].set_linewidth(6)
ax.spines["bottom"].set_capstyle("round")</code></pre>
              </a>
            </td>

          </tr>
          <tr>
            <td>
              <a target="_self" href="#smallfig">
                <img title="small Figure"
                  src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_small_fig.png"
                  alt="a half-size Figure"
                  style="height: 110px;">
              </a>
            </td>

            <td>
              <a target="_self" href="#smallfig">
<pre><code>fig = plt.figure(figsize=(width, height))</code></pre>
              </a>
            </td>

          </tr>

          <tr>

            <td>
              <a target="_self" href="#lowres">
                <img title="low resolution image"
                  src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_lo_res_fig.png"
                  alt="a low resolution version of the image"
                  style="height: 220px;">
              </a>
            </td>

            <td>
              <a target="_self" href="#lowres">
<pre><code>fig.savefig("filename.png", dpi=15)</code></pre>
              </a>
            </td>

          </tr>

          <tr>
            <td>
              <a target="_self" href="#axescolor">
                <img title="Axes color"
                  src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_axes_bg_color.png"
                  alt="a plot with a colorful background"
                  style="height: 220px;">
              </a>
            </td>

            <td>
              <a target="_self" href="#axescolor">
<pre><code>ax.set_facecolor("#e1ddbf")</code></pre>
              </a>
            </td>

          </tr>

          <tr>

            <td>
              <a target="_self" href="#figbgcolor">
                <img title="Figure background color"
                  src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_fig_bg_color.png"
                  alt="A Figure with a colorful background"
                  style="height: 220px;">
              </a>
            </td>

            <td>
              <a target="_self" href="#figbgcolor">
<pre><code>fig = plt.figure(facecolor="#e1ddbf")
fig.savefig(
    "filename.png",
    facecolor=fig.get_facecolor())</code></pre>
              </a>
            </td>

          </tr>

          <tr>

            <td>
              <a target="_self" href="#figedgecolor">
                <img title="Figure frame"
                  src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_fig_frame.png"
                  alt="a Figure with a solid frame"
                  style="height: 220px;">
              </a>
            </td>

            <td>
              <a target="_self" href="#figedgecolor">
<pre><code>fig = plt.figure(
    linewidth=10, edgecolor="#04253a")
fig.savefig(
    "filename.png",
    edgecolor=fig.get_edgecolor())</code></pre>
              </a>
            </td>

          </tr>
        </table>

        <br>
        <br>
        <h3>Get your layout right</h3>
        <p>
          I've spent more time wrestling with frames, layouts, and backgrounds
          than anything else in Matplotlib. Here are the most
          straightforward methods I've found.
        </p>
        <p>
          First, we'll start with this setup for all the examples to follow.
          For an explanation of it, <a
          href="matplotlib_going_deeper.html">check here</a>.
        </p>


<pre><code>import matplotlib
matplotlib.use("agg")
import matplotlib.pyplot as plt
import numpy as np

# Create the curve data.
x = np.linspace(-6, 6, 500)
y = np.sinc(x)

fig = plt.figure()
ax = fig.gca()
ax.plot(x, y)</code></pre>

        <br>
        <br>
        <h3 id="manual">Manually place your <var>Axes</var></h3>

        <p>
          By default, a <var>Figure</var> will create an <var>Axes</var> object with a
          reasonable size and location, but it doesn't always get it
          right. If you change your
          <a href="matplotlib_ticks.html#log">tick label formatting</a> or 
          <a href="matplotlib_ticks.html#label_style">tick font size</a>
          for instance, things can start falling
          off the edge of the <var>Figure</var>. To get around this, you can
          manually place <var>Axes</var> right where you wnt them.
        </p>

<pre><code>ax = fig.add_axes((left, bottom, width, height))</code></pre>

        <p>
          This call to <code>add_axes()</code> specifies the x and y positions
          of the lower left hand corner of the <var>Axes</var>, together with
          the width and the height of it.
          It's most important to note that all of these are expressed as
          fractions of the figure width and height. Because of this, they will
          almost always fall between 0 and 1.
        </p>

        <img title="manually set Axes by size and position"
          src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_manual.png"
          alt="Axes with position set manually by size and position"
          style="height: 440px;">

        <br>
        <br>
        <h3 id="multiple">Create several <var>Axes</var></h3>

        <p>
          Some stories are best told by putting two or more plots side by side.
          In Matplotlib you can do this by adding additional <var>Axes</var> to
          the same <var>Figure</var> as many times as you need to.
        </p>


<pre><code>ax1 = fig.add_axes((left_1, bottom_1, width_1, height_1))
ax1.plot(x, y)
ax2 = fig.add_axes((left_2, bottom_2, width_2, height_2))
ax2.plot(x, y)
...</code></pre>

        <p>
          Each one is
          a separate object and can be modified independently using all the
          methods we've mentioned already. <var>Axes</var> can overlap each
          other and even fall partly outside the <var>Figure</var> boundaries.
        </p>

        <img title="multiple Axes"
          src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_multiple.png"
          alt="multiple Axes on a single Figure"
          style="height: 440px;">

        <p>
          I have to admit a bias here. There are already some tools in place to
          help layout multiple <var>Axes</var> objects. There's 
          <a href"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplots.html">
            <code>subplots()</code></a> and
          <a href="https://matplotlib.org/api/_as_gen/matplotlib.gridspec.GridSpec.html">
            <code>gridspec()</code></a>. Those get 80% of the way there.
            Then there is 
          <a
          href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.tight_layout.html">
            <code>tight_layout()</code></a> and
          <a href="https://matplotlib.org/tutorials/intermediate/constrainedlayout_guide.html#sphx-glr-tutorials-intermediate-constrainedlayout-guide-py">
            <code>constrained layout()</code></a> which try to clean things up
            and make up yet another 10%. If you need a 90% solution, these are
            a fine way to go. But if you want things to look a particular way
            or line up just so, then you'll soon find yourself tweaking these
            and fiddling with down-in-the-weeds settings. In my experience, I
            get better results with less work by thinking through the layout I
            want and specifying each <var>Axes</var> manually. But if you are
            feeling curious try both approaches for yourself and see what works
            best for you.
        </p>

        <br>
        <br>
        <h3 id="fill">Fill the <var>Figure</var> with one <var>Axes</var></h3>

        <p>
          One trick that's occasionally useful is to fill the entire
          <var>Figure</var> with the plot area of one <var>Axes</var>.
          With our trick of manual placement, this is a breeze.
        </p>

<pre><code>ax1 = fig.add_axes((0, 0, 1, 1))</code></pre>

        <p>
          Using left and bottom values of 0 and width and height of 1 fills the
          <var>Axes</var> completely, by definition.
        </p>

        <img title="Figure filled with Axes"
          src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_no_border.png"
          alt="Axes sized to fill the Figure"
          style="height: 440px;">

        <br>
        <br>
        <h3 id="spinesoff">Hide axis spines </h3>

        <p>
          Removing unnecessary lines really cleans up a plot. The lines that
          form the border of the plot area are called axis spines, and
          sometimes they are expendable.
        </p>

<pre><code>ax.spines["top"].set_visible(False)
ax.spines["right"].set_visible(False)
ax.spines["left"].set_visible(False)</code></pre>

        <p>
          This trick lets us set the properties of each of the four spines
          independently. Here, we toggle their visibility.
        </p>

        <img title="spines turned off"
          src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_spines_off.png"
          alt="some of the Axes spines turned off"
          style="height: 440px;">


        <br>
        <br>
        <h3 id="spinesmoved">Move the spines around</h3>

        <p>
          We can also shift the spines around a bit. The y-axis spines can move
          right and left and the x-axis spines can move up and down.
        </p>

<pre><code>ax.spines["top"].set_position(("outward", 15))
ax.spines["bottom"].set_position(("data", 0))
ax.spines["left"].set_position(("axes", .3))
ax.spines["right"].set_position(("outward", -40))</code></pre>

        <p>
          There are three different methods to move them: <code>"data"</code>,
          <code>"axes"</code>,  and <code>"outward"</code>. 
        </p>

        <p>
          <code>"data"</code> lets you specify the position in your data
          coordinates to place the spine. This is super useful for putting
          spines along the x = 0 and y = 0 lines. 
        </p>

        <p>
          <code>"axes"</code> lets you name the position as a fraction of the
          <var>Axes</var> height and width. 0 is the bottom or the left of the
          plotting area, and 1 is the top or the right. .5 is right in the
          middle. Less than 0 or more than 1 is outside the plotting area.
        </p>

        <p>
          <code>"outward"</code> lets you indicate a position as an offset from
          the boundary of the plotting area, measured in points (there are 72
          points in an inch). A positive offset is away from the center of the
          plotting area, a negative offset is toward it. A positive offset for a
          left spine would move it to the left, and a positive offset of a right
          spine would move it to the right, for example.
        </p>

        <p>
          Note that all of these let you place spines outside the plotting area
          (or even outside the <var>Figure</var> boundaries).
        </p>

        <img title="spines moved"
          src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_spines_moved.png"
          alt="spines offset from their default positions"
          style="height: 440px;">



        <br>
        <br>
        <h3 id="spinestyle">Modify the spines</h3>

        <p>
          Just like all the other lines in our plot, we can modify their style
          to suit our whims.
        </p>

<pre><code>ax.spines["top"].set_color("orange")
ax.spines["left"].set_bounds(-.5, .5)
ax.spines["right"].set_linestyle("--")
ax.spines["bottom"].set_linewidth(6)
ax.spines["bottom"].set_capstyle("round")</code></pre>

        <p>
          Most of the settings should be familiar from the
          <a href="matplotlib_lines.html">section on Lines</a>, but it's worth
          calling out <code>set_bounds()</code>. It allows you to dictate the
          lower and upper bounds of an axis spine. There's no need for it to
          span the plotting area.
        </p>

        <img title="modify Axes spine styles"
          src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_spines_styled.png"
          alt="Axes spines with several styles"
          style="height: 440px;">



        <br>
        <br>
        <h3 id="smallfig">Change the size of the <var>Figure</var></h3>

        <p>
          You can also change the measurements of the <var>Figure</var>
          overall. When you create it without choosing a size, Matplotlib
          chooses a reasonable default size - typically something like 6 1/2
          inches wide by 4 1/2 inches high. However, if you know the final
          image is going to need to be a certain size, say, filling a 12 x 8
          inch spot on a poster or a 3 x 2 inch slot in a two-column paper
          manuscript, if can be helpful to start with that. 
        </p>


<pre><code>fig = plt.figure(figsize=(width, height))</code></pre>

        <p>
          Here, <code>width</code> and <code>height</code> are always in
          inches. By starting with the final size specification, you can avoid
          rescaling your final image. This lets you control the aspect ratio
          and makes the font sizes and line thicknesses meaningful. It also
          ensures that you can pick an output resolution that will look sharp.
        </p>

        <img title="small Figure"
          src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_small_fig.png"
          alt="a half-size Figure"
          style="height: 220px;">



        <br>
        <br>
        <h3 id="lowres">Change the resolution of the <var>Figure</var></h3>

        <p>
          Together with size, controlling the output image resolution gives you
          control over the quality of the final product.
        </p>

<pre><code>fig.savefig("image_filename.png", dpi=15)</code></pre>

        <p>
          You can specify the <code>dpi</code>, dots per inch, in the call to
          <code>savefig()</code>. For printing and most screens, 150 is pretty
          good, 300 is clear, and 600 is spectacular. 1200 or higher can come
          in handy if you want to be able to do a lot of zooming in, but your
          image can start to get very big on disk at that resolution.
        </p>

        <img title="low resolution image"
          src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_lo_res_fig.png"
          alt="a low resolution version of the image"
          style="height: 440px;">




        <br>
        <br>
        <h3 id="axescolor">Change <var>Axes</var> background color</h3>

        <p>
          It's not tough to change up the background color of the plotting area.
        </p>

<pre><code>ax.set_facecolor("#e1ddbf")</code></pre>

        <p>
          You can use any Matplotlib color specification for this. Here we used
          a hexidecimal code.
        </p>

        <img title="Axes color"
          src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_axes_bg_color.png"
          alt="a plot with a colorful background"
          style="height: 440px;">



        <br>
        <br>
        <h3 id="figbgcolor">Change <var>Figure</var> background color</h3>

        <p>
          Similarly, you can tweak the <var>Figure</var> background color to be
          whatever you like.
        </p>

<pre><code>fig = plt.figure(facecolor="#e1ddbf")
fig.savefig("image_filename.png", facecolor=fig.get_facecolor())</code></pre>

        <p>
          We can set this up when first creating the <var>Figure</var> by
          including the <code>facecolor</code> argument and choosing a color.
        <p>

        <img title="Figure background color"
          src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_fig_bg_color.png"
          alt="A Figure with a colorful background"
          style="height: 440px;">

        <p>
          One quirk of this is that <code>savefig()</code> tries to be helpful
          and assumes that you'd like to save with a white background. While
          this default has doubtless saved truckloads of toner cartridges, it's
          not always what you want. To get around this, you can manually
          re-specify that the <code>facecolor</code> of the saved image
          background should definitely be the <code>facecolor</code> of the
          original <var>Figure</var>.
        </p>

        <br>
        <br>
        <h3 id="figedgecolor">Frame the <var>Figure</var></h3>

        <p>
          Rounding out our menu of layout midifications is a frame
          around the whole <var>Figure</var>. 
        </p>

<pre><code>fig = plt.figure(linewidth=10, edgecolor="#04253a")
fig.savefig("image_filename.png", edgecolor=fig.get_edgecolor())</code></pre>

        <p>
          We can create a border by both choosing a nonzero
          <code>linewidth</code> and an <code>edgecolor</code> when creating our
          <var>Figure</var>. When calling <code>savefig()</code> we have to
          repeat our trick of explicitly setting the <code>edgecolor</code> in
          the output image.
        </p>
          
        <img title="Figure frame"
          src="https://github.com/brohrer/taming_matplotlib/raw/master/images/framing_fig_frame.png"
          alt="a Figure with a solid frame"
          style="height: 440px;">

        <br>
        <br>
        <p>
          Now you know all my layout tricks. As with all of Matplotlib, there
          are several ways to do most of these things, but what I included here are for me
          the most intuitive, most flexible, and require the
          least memorization.
        </p>
        <p>
          If this was helpful, there are a handful of other Matplotlib how-to's you can refer to:
          <a href="https://end-to-end-machine-learning.teachable.com/p/navigating-matplotlib-tutorial-how-to/">
          come take a look at the full set of tutorials</a>.
        </p>

        <script type="text/javascript" src="javascripts/blog_signature.js"></script>
      </section>
    </div>
    <script type="text/javascript" src="javascripts/blog_footer.js"></script>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-10180621-3");
      pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>
